define("static/t1/dist/script/page_book",["./module_core","./module_ajax","./module_effect","./module_utils","./module_md5","./module_validator","./module_tpl","./module_swal","./module_validate"],function(require,exports){var core=require("./module_core"),mMd5=require("./module_md5"),mVad=require("./module_validator"),tpl=require("./module_tpl");require("./module_swal"),require("./module_validate");if(!window.Promise);var a,Q={isLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(a){return!1}}(),isEmpty:function(a){if(""===a||void 0===a)return!0;if("object"!=typeof a)return!1;if(!(a instanceof Array&&0===a.length))for(var c in a)return!1;return!0},getURI:function(a){for(var e,c=location.href.substr(1).split("&"),b=0,d={};e=c[b++];)d[(e=e.split("="))[0]]=e[1];return d[a]||""},storage:function(a,c){return null!=c&&Q.isLocalStorage?(c=c.toString(),localStorage.removeItem(a),localStorage.setItem(a,c),c):(null===c&&localStorage.removeItem(a),localStorage.getItem(a))},tips:function(a,c){var b=document.createElement("div");b.className="tips",b.innerHTML=a,document.body.insertBefore(b,document.body.firstChild),c&&setTimeout(function(){document.body.removeChild(b)},1e3*c)},alert:function(a,c){var b=document.createElement("div");b.addEventListener("click",function(a){a.stopPropagation()},!1),b.className="alert";var d=document.createElement("div");d.className="alert_bg";var e={close:function(a){a&&a.preventDefault(),a&&a.stopPropagation(),"function"==typeof c&&c(b),d.removeChild(b),b.innerHTML="",document.body.removeChild(d),d=null}},f=document.createElement("div");return f.className="close",f.addEventListener("click",e.close,!1),f.addEventListener("touchstart",e.close,!1),"function"==typeof a&&(a=a.call(e)),"string"==typeof a?b.innerHTML=a:a.appendChild&&b.appendChild(a),b.appendChild(f),d.appendChild(b),document.body.appendChild(d),setTimeout(function(){b.className="alert open",b.clientHeight<window.innerHeight&&(b.style.top=(window.innerHeight-b.clientHeight)/2+"px")},1),e},confirm:function(a,c,b){Q.alert(function(){var b=this,e=document.createElement("div");"string"==typeof a?e.innerHTML=a:e.appendChild(a);var f=document.createElement("span");f.className="btn definite",f.innerHTML="确定",f.onclick=function(){c(!0),b.close()};var g=document.createElement("span");return g.className="btn cancel",g.innerHTML="取消",g.onclick=function(){c(!1),b.close()},e.appendChild(f),e.appendChild(g),e},b)},book:function(a){if(!a)var c=(c=location.pathname.match(/\/(?:[a-z]+)\/(\d+).+html$/i))?c[1]:0;var b="bookid_"+(a||c),d=localStorage.getItem(b);return d||(d='{"chapter":"", "list":"", "page":1, "listOrderType":0}',Q.storage(b,d)),d=JSON.parse(d),{id:Number(a||c),get listOrderType(){return d.listOrderType||0},set listOrderType(a){d.listOrderType=a,Q.storage(b,JSON.stringify(d))},get chapter(){if(a)return d.chapter;var b=location.pathname.match(/^\/(?:vip)*chapter\/\d+\/(\d+)\.html$/i);return b?b[1]:0},set chapter(a){d.chapter=a,Q.storage(b,JSON.stringify(d))},get list(){return d.list||1},set list(a){d.list=a,Q.storage(b,JSON.stringify(d))},get page(){return d.page},set page(a){d.page=a,Q.storage(b,JSON.stringify(d))}}},postFormData:function(a,c){var b="";if("object"==typeof a)if(c||!window.FormData)for(var d in a)b+=d+"="+encodeURIComponent(a[d])+"&";else for(d in b=new FormData,a)b.append(d,a[d]);return b},isLogin:function(){return!!GLOBAL.user},checkRegister:function(a,c){var b=new XMLHttpRequest;return b.open("post",a,!1),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(Q.postFormData(c,!0)),JSON.parse(b.responseText)},net:function(a,c,b,d){return a.match(/^http/i)&&!new RegExp("^"+location.origin,"i").test(a)?(Q.jsonp(a,c,b),"jsonp"):"function"==typeof b?(Q.ajax(a,c,b,d),"ajax"):Q.load(a,c)},ajax:function(a,c,b,d){var e="post";"function"==typeof c&&(e="get",d=b,b=c);var f=new XMLHttpRequest;f.addEventListener("load",function(){if(404!=this.status){var a=this.responseText;"json"===d&&(a=JSON.parse(a)),b&&b.call(f,a)}}),f.open(e,a,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(Q.postFormData(c,!0))},post:function(a,c){var b;(b=document.createElement("iframe")).name="Q_post_artwc_iframe",b.style.display="none",document.body.appendChild(b),b.onload=function(){document.body.removeChild(b),b=null};var d,e=document.createElement("form");for(var f in e.target="Q_post_artwc_iframe",e.action=a,e.method="post",c)(d=document.createElement("input")).type="hidden",d.name=f,d.value=c[f],e.appendChild(d);document.body.appendChild(e),e.submit(),document.body.removeChild(e)},load:function(a,c){try{var b=new XMLHttpRequest;return b.open(c?"post":"get",a,!1),c&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(c?Q.postFormData(c,!0):null),b.responseText}catch(d){return""}},loadjs:function(a,c){var b=document.createElement("script");b.src=a,c&&c.tagName?c.appendChild(b):document.querySelector("head").appendChild(b),"function"==typeof c&&(b.onload=c)},loadCss:function(a,c){var b=document.createElement("link");b.setAttribute("text","text/css"),b.setAttribute("rel","stylesheet"),b.href=a,c&&(b.onload=c),document.querySelector("head").appendChild(b)},jsonp:function(a,c,b){"function"==typeof c&&(c=[b,b=c][0]);var d=document.querySelector("head"),e="Jsonp"+String((new Date).getTime())+String(Math.floor(1e3*Math.random()));Q[e]=function(a){b(a,e),d.removeChild(f),f=Q[e]=null};var f=document.createElement("script");for(var g in a.match(/\?/)||(a+="?"),a=(a+"&callback=Q."+e+"&jsonp=Q."+e).replace("?&","?"),c)a+="&"+encodeURIComponent(g)+"="+encodeURIComponent(c[g]);f.src=a,d.appendChild(f)},cookie:function(a,c,b,d,e){d="domain="+(d||"aishu8.com")+";",e="path="+(e||"/")+";";var f=new Date,g=new RegExp(a+"=(.*?)(;|$)","i");switch(c){case void 0:null!=(a=document.cookie.match(g))&&(a=decodeURIComponent(a[1]));break;case null:document.cookie=a+"=;"+d+e+"expires="+new Date(0).toUTCString(),a=!0;break;default:b=0==b?"":(f.setTime(f.getTime()+864e5*(b||30)),"expires="+f.toUTCString()),document.cookie=a+"="+encodeURI(c)+";"+d+e+b,a=!0}return a||""},getPlatform:function(){var a=navigator.userAgent;switch(!0){case!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/):return"ios";case-1<a.indexOf("Android")||-1<a.indexOf("Adr"):return"android";case!!/MicroMessenger/i.test(a):return"weixin";default:return""}},bookBigData:function(a){!Q.bookBigData.fn&&(Q.bookBigData.fn=[]),a&&Q.bookBigData.fn.push(a),Q.bookBigData.json?Q.bookBigData.next():Q.loadjs("http://www.aishu8.com/book/"+Q.book().id+".js?r="+(new Date).getTime().toString().substr(0,8)),Q.bookBigData.load=function(a){if(!a.list){a.list=[];for(var c,b=0;c=a.volumes[b];b++)for(var f,e=0;f=c.chapters[e];e++)a.list.push(f.id)}(b=a.client_first)&&b.chapter_first&&(c=b.chapter_first[Q.book().chapter])&&(a.appTime=1e3*(c+b.second_first),a.appTime<(new Date).getTime()&&(a.appTime=0)),Q.bookBigData.json=a,Q.bookBigData()},Q.bookBigData.next=function(){if(!Q.bookBigData.isRuning&&Q.bookBigData.fn.length&&!Q.isEmpty(Q.bookBigData.json)){Q.bookBigData.isRuning=!0;var a=Q.bookBigData.fn[0](Q.bookBigData.json);Q.bookBigData.fn.shift(),Q.bookBigData.isRuning=!1,a?(Q.bookBigData.json=null,Q.bookBigData()):Q.bookBigData.next()}}},search:function(a){var c=document.createElement("div");c.className="search_iframe";var b=document.createElement("iframe");b.frameBorder=0,b.src="/book/search_home#"+a,c.appendChild(b),document.body.appendChild(c)},reLoadImages:function(a){a=a||[].slice.call(document.getElementsByTagName("img")).filter(function(a){return!!a.getAttribute("data_src")});var c=document.documentElement.clientHeight,b=document.documentElement.clientWidth;return a.filter(function(a){var d=a.getBoundingClientRect(),f=a.getAttribute("data_src");f&&0<d.top+a.clientHeight&&d.top<c&&0<d.left+a.clientWidth&&d.left<b&&(a.src=f,a.removeAttribute("data_src"))}),a},when:function(a,c){var b=function(){!0===a()?c():setTimeout(b)};b()}};function dingyueF(sexType0,page0,size0,callBack,navId,templateId){core.list({url:"/book/findByShelfAndSex",data:{sexType:sexType0,size:size0,page:page0},type:"POST"}).then(function(data,a,b){callBack(data.data,navId,templateId)})}function newdjF(sexType0,page0,size0,callBack,navId,templateId){core.list({url:"/book/findNewFictions",data:{sexType:sexType0,size:size0,page:page0},type:"POST"}).then(function(data,a,b){callBack(data.data,navId,templateId)})}function djF(sexType0,page0,size0,callBack,navId,templateId){core.list({url:"/book/findByClickNum",data:{sexType:sexType0,size:size0,page:page0},type:"POST"}).then(function(data,a,b){callBack(data.data,navId,templateId)})}function wanbenF(sexType0,page0,size0,callBack,navId,templateId){core.list({url:"/book/findByStatusAndNum",data:{sexType:sexType0,size:size0,page:page0},type:"POST"}).then(function(data,a,b){callBack(data.data,navId,templateId)})}function allList(type,bookTypeId,page,size,call){var dataV="";core.list({url:"/book/allByType",data:{type:type,bookTypeId:bookTypeId,page:page,size:size}}).then(function(data,a,b){dataV=data.success?data.data:null,call(dataV)})}function cannelStle(styles){for(var i=0;i<styles.length;i++)styles[i].className=""}function changePage(size){var nowPage=$("#list_nowPage").val(),endPage=$("#list_num0").val(),page=Number(nowPage)+Number(size);0<!page?alert("当前已经是第一页了"):endPage<page?alert("这已经是最后一页了"):selectPage(page)}function selectPage(page){var bookId=$("#list_BookId").val();core.list({url:"/book/findChapters/"+bookId+"/"+page}).then(function(data,a,b){var listCont_Tmpl=$("#listCont_id_Tmpl").render(data.data),listCont=$("#listCont_id");listCont.empty(),listCont.append(listCont_Tmpl),$("#list_nowPage").val(page)})}Q.guid=function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var c=Q.cookie("GUID");return c||(c=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a(),Q.cookie("GUID",c,365,"aishu8.com","/")),c}(),Q.referrer=(-1==(a=document.referrer).indexOf("aishu8.com")&&Q.cookie("c_referer_aishu8",a,0),Q.cookie("c_referer_aishu8")),window.addEventListener("DOMContentLoaded",function(){var a=Q.reLoadImages();a&&window.addEventListener("scroll",function(){a=Q.reLoadImages(a)}),Q.isLocalStorage||Q.tips("提示：您的浏览器设置了无痕浏览，会影响部分功能。可通过点击浏览器右下角关闭。")}),exports.index=function(){core.list({url:"/banner/listByType",data:{type:"book"},type:"POST"}).then(function(data,a,b){var Tmpl=$("#swiper-wrapper_Tmpl").render(data.data);$("#index-swiper-wrapper").append(Tmpl),new Swiper(".swiper-container",{loop:!0,pagination:".swiper-pagination",autoplay:4e3,speed:300,autoplayDisableOnInteraction:!1})}),core.list({url:"/book/recommendBooks?size=12"}).then(function(data,a,b){tpl.render({tplId:"#recommendNavTmpl",renderId:"#jinxuantuijian_ID",data:data}),new Swiper(".swiper-jinxuantuijian",{loop:!0,autoplay:6e3,speed:400,autoplayDisableOnInteraction:!1})}),core.list({url:"/book/sexTypeBooks?sexType=1"}).then(function(data,a,b){var manNavMore=$("#shudan_slide_id_Tmpl").render(data);$("#shudan_slide_id").append(manNavMore),function(shudan_slide){var height=shudan_slide.clientHeight,pages=Math.floor(shudan_slide.scrollHeight/height),index=0;document.getElementById("Shudan").addEventListener("click",function(){++index==pages&&(index=0),shudan_slide.scrollTop=index*height})}(document.querySelector(".shudan_slide"))}),core.list({url:"/book/sexTypeBooks?sexType=0&size=12"}).then(function(data,a,b){tpl.render({tplId:"#recommendNavTmpl",renderId:"#nvshengzuiai_id",data:data}),new Swiper(".swiper-huobaorexiao",{loop:!0,autoplay:6e3,speed:400,autoplayDisableOnInteraction:!1})}),$("#search_input").on("click",function(){Q.search($(this).val())})},exports.online=function(){if(top==window&&navigator.onLine){var userInfo=GLOBAL.user;Q.setLoginInfo=function(a){Q.isLogin()?(null!=userInfo.userAvatar?a.innerHTML='<img src="'+GLOBAL.config.fileHost+userInfo.userAvatar+'">':a.innerHTML='<img src="'+HTTP_STATIC_DOMAIN+'/static/front/dist/img/book/default_4.jpg">',a.style.boxShadow="0 0 3px rgba(0, 0, 0, .5)",a.href="/book/user/info"):a.onclick=function(){window.location.href="/h5/login"}},window.addEventListener("DOMContentLoaded",function(){(new Image).src="http://api.share.baidu.com/s.gif?l="+encodeURIComponent(location.href)+(document.referrer?"&r="+encodeURIComponent(document.referrer):"");var a=Q.cookie("TOP_DON_COOKIE");if(!a){var b=document.createElement("style");b.setAttribute("text","text/css"),b.innerText=".all_don,.btn_don,.mid_don,.top_don{-webkit-transition: all .3s ease;transition: all .3s ease;position:fixed;max-width:600px;font-size:0;z-index:5}.all_don img,.btn_don img,.mid_don img,.top_don img{width:100%}.all_don span,.btn_don span,.mid_don span,.top_don span{display:inline-block;position:absolute;bottom:0;left:0}.all_don a,.btn_don a,.mid_don a,.top_don a{display:inline-block}.all_don{position:fixed;z-index:300;top:0;right:0;left:0;bottom:0}.all_don img{height:100%}.all_don span{width:48.5%;height:8.8%;left:26%;top:29.5%}.all_don a{position:absolute;width:48.5%;height:8.8%;left:26%;top:20%}.top_don{position:relative;z-index:6}.top_don span{z-index:6;width:11.5%;height:100%}.top_don a img{width:100%}.btn_don{bottom:0}.btn_don span{width:11.5%;height:100%}.mid_don{bottom:-25%;overflow:hidden;}.mid_don span{background: url(http://img.aishu8.com/subject/wuyuepay/skin/close.png) center center no-repeat;width: 10%;height: 25%;position: absolute;top: 0;left: 90%;z-index:3;}.mid_don a{width: 100%;height: 100%;position: absolute;}.book_home_float {position: fixed;top: 17.5em;z-index: 1;right: 3px;width: 5em;}.book_home_float a{display:block;width: 5em;height: 5.1em;background: url(http://img.aishu8.com/subject/scfq/skin/book_home_float.png) center center no-repeat;background-size: 100%;}",document.head.appendChild(b)}if(!a&&(GetUrlRelativePath("/")||GetUrlRelativePath("/topv3")||GetUrlRelativePath("/list")||GetUrlRelativePath("/chapter/"))&&-1==Q.cookie("c_csc").indexOf("smss")){a='<span class="top_don_span" onclick="deldon(this)"></span><a onclick="anorios(this)"  href="http://h5.aishu8.com/download/index.html?hmsr=shufuceng500"><img src="http://img.aishu8.com/subject/scfq/skin/top_don_bg.jpg" alt=""></a>',GetUrlRelativePath("/chapter/")&&(a=""),createfirstChild(a,"top_don");var c=document.querySelector(".top_don");if(GetUrlRelativePath("/")){var d=document.body,e=document.querySelector(".Head");e.style.cssText="position:relative;",d.style.marginTop="0";var f=c.offsetHeight;window.addEventListener("scroll",function(){document.body.scrollTop<=f?(d.style.marginTop="0",e.style.cssText="position:relative;",c.style.display="block"):(d.style.marginTop="3em",e.style.cssText="position:fixed;top:0;",c.style.display="none")})}}GetUrlRelativePath("/book/")&&createfirstChild('<a href="http://h5.aishu8.com/inc/yindao02.html" target="_blank"></a>',"book_home_float")});var GetUrlRelativePath=function(a){return"/book/"==a?/^(http:\/\/h5.aishu8.com\/book\/)(\d+)(\.html)([^\/]*$)/.test(location.href):"/"==a?/^(http:\/\/h5.aishu8.com\/$)/.test(location.href):0<=location.pathname.indexOf(a)},createfirstChild=function(a,b){var c=document.createElement("div");c.className=b,c.innerHTML=a,document.body.insertBefore(c,document.body.firstChild)}}Q.setLoginInfo(document.getElementById("UserLoginIcon"))},exports.register=function(){mVad({forms:$(".form"),tip:".tip",rules:{rules:{validCode:{required:!0,minlength:4,maxlength:4},mobileCode:{required:!0,minlength:6,maxlength:6},userName:{required:!0,minlength:11,mobile:!0},password:{required:!0,password:!0,minlength:6,maxlength:20},confirm_password:{required:!0,minlength:6,maxlength:20,equalTo:"#password"}},messages:{}},postData:function(data){var _data=[];return $.each(data,function(i,field){"confirm_password"!=field.name&&("password"!=field.name?_data.push(field):_data.push({name:"password",value:mMd5.hbmd5(field.value)}))}),_data},formSubmit:function(_option,form){core.save(_option.ajaxData).then(function(data){data.success?window.location.href="/login":$(_option.tip).removeClass("p-hide").html(data.msg),_option.callback(data,form)}).fail(function(jqXHR,textStatus){$(_option.tip).removeClass("p-hide").html(data.msg),_option.callback({},form)})}})},exports.login=function(){mVad({forms:$(".form"),tip:".tip",rules:{rules:{validCode:{required:!0,minlength:4,maxlength:4},userName:{required:!0,maxlength:16},password:{required:!0,maxlength:100}},messages:{}},postData:function(data){var _data=[];$.each(data,function(i,field){"password"!=field.name?_data.push(field):_data.push({name:"password",value:mMd5.hbmd5(field.value)})});var rememberMe=$("#rememberMe").is(":checked");return _data.push({name:"rememberMe",value:rememberMe}),_data},formSubmit:function(_option,form){core.save(_option.ajaxData).then(function(data){data.success?window.location.href=data.successURL:$(_option.tip).removeClass("p-hide").html(data.msg),_option.callback(data,form)}).fail(function(jqXHR,textStatus){$(_option.tip).removeClass("p-hide").html(data.msg),_option.callback({},form)})}})},exports.category=function(){core.list({url:"/book/sexTypeBooks?sexType=1&size=5"}).then(function(data,a,b){var category_parts=$("#category_parts_Tmpl").render(data);$("#category_part2_id").append(category_parts)}),core.list({url:"/book/sexTypeBooks?sexType=0&size=5"}).then(function(data1,a,b){var category_parts=$("#category_parts_Tmpl").render(data1);$("#category_part3_id").append(category_parts)}),core.list({url:"/book/sexTypeBooks?sexType=2&size=5"}).then(function(data2,a,b){var category_parts=$("#category_parts_Tmpl").render(data2);$("#category_part4_id").append(category_parts)}),function(){for(var label=document.querySelectorAll(".NAV label"),i=0;i<label.length;i++)label[i].addEventListener("click",function(){for(var i=0;i<label.length;i++)label[i].className="";var site;this.className="now",site=this.getAttribute("rel"),Q.jsonp("http://api.aishu8.com/v2/book/category/"+site,{app_key:1351550300},function(data){if(0==data.status.code){var html=['<dl class="fenlei_tab">'];data.data.child_node.forEach(function(c_1){html.push('<dt><a href="all.html?site='+site+"&category_1="+c_1.id+'"><span>'+c_1.name+"</span></a></dt>"),html.push("<dd>"),c_1.child_node.forEach(function(c_2){html.push('<a href="all.html?site='+site+"&category_1="+c_1.id+"&category_2="+c_2.id+'">'+c_2.name+"</a>")}),html.push("</dd>")}),html.push("</dl>"),document.querySelector("#channles").innerHTML=html.join("")}})});label[0].click(),0==window.location.href.indexOf("?f=mm")&&document.querySelector("#mmNav").click()}()},exports.chapter=function(){var content=$("#chapter_content").val();$("#chapter_content_div").html(content);var id=$("#chapter_id").val(),bookId=($("#chapter_sort").val(),$("#chapter_bookId").val()),template='<dt></dt><dd><label><a href="/book/chapter/'+bookId+"/"+id+'?type=-1">上一章</a></label><label><a href="/book/list/'+bookId+'">目录</a></label><label><a href="/book/chapter/'+bookId+"/"+id+'?type=1">下一章</a></dd>';$(".ChapterBar").html(template)},exports.userInfo=function(){!function(nodes){for(var a,b,j,i=0;j=nodes[i];i++)location.href==j.href||location.href+"/"==j.href?a=j:new RegExp(j.href,"i").test(location.href)&&(b=j);var k=a||b;k&&(k.className+=" now")}(document.querySelectorAll("section.nav_bottom a"));var member_wrap=document.getElementById("member");Q.jsonp("http://api.aishu8.com/v2/user/57391304?app_key=2406394919&month_read_info=1&_access_version=2",{},function(data){if(data.status.code="0"){2==data.data.month_read.status?document.querySelector(".memberIcon").style.display="inline-block":document.querySelector(".memberIcon").style.display="none",document.getElementById("ye").innerHTML="余额："+data.data.account.balance+"K币",document.getElementById("djq").innerHTML=data.data.account.couponbalance;var d=new Date(data.data.month_read.end_time),time=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();data.data.month_read.old_member?member_wrap.innerHTML='<a><span class="member">全站会员</span><span>'+time+"</span></a>":0!=data.data.month_read.expire?member_wrap.innerHTML='<a href="http://pay.aishu8.com/v2/h5/pay/baoyue.do"><span class="member">开通包月</span><span></span></a>':member_wrap.innerHTML='<a href="http://pay.aishu8.com/v2/h5/pay/baoyue.do"><span class="member">开通包月</span><span>'+time+"</span></a>"}})},exports.free=function(){core.list({url:"/book/findBooksByTypeId"}).then(function(data,a,b){var free_bookList=$("#free_bookList_id"),typeId="",htmlTemplate="";if(0<data.length){for(var i=0;i<data.length;i++){var section='<section class="bookList"><div><span>'+data[i].typeValue+'</span><a href="/book/all/'+data[i].typeId+'">查看全部&gt;&gt;</a> </div><dl>',ddValue='<dd><a href="/book/info/'+data[i].id+'">';ddValue=(ddValue=null==data[i].logo||""==data[i].logo?ddValue+'<img alt="'+data[i].name+'" src="@{${@globalService.staticUrl()}+\'/static/front/src/img/book/noImage.jpg\'}" />':ddValue+'<img alt="'+data[i].name+'" src="'+data[i].logo+'" />')+"<span>"+data[i].name+"</span></a></dd>",0==i?htmlTemplate=htmlTemplate+section+ddValue:data[i].typeId!=typeId?htmlTemplate=htmlTemplate+"</dl> </section>"+section+ddValue:i==data.length-1?htmlTemplate=htmlTemplate+ddValue+"</dl> </section>":htmlTemplate+=ddValue,typeId=data[i].typeId}free_bookList.append(htmlTemplate)}})},exports.info=function(){var typeId=$("#fiction_typeId").val(),bookId=$("#fiction_bookId").val(),readerLikeList=$("#readerLikeList");core.list({url:"/book/findFictionsByBookTypeId?typeId="+typeId+"&size=4"}).then(function(data2,a,b){var readerLikeList_Tmpl=$("#readerLikeList_Tmpl").render(data2);readerLikeList.append(readerLikeList_Tmpl)}),function(readerLikeList){var height=readerLikeList.clientHeight,pages=Math.floor(readerLikeList.scrollHeight/height),index=0;document.getElementById("change_Btn").addEventListener("click",function(){++index==pages&&(index=0),readerLikeList.scrollTop=index*height})}(document.querySelector("#readerLikeList")),document.getElementById("nowRead").href="/book/chapter/"+bookId+"/0?type=0",core.list({url:"/book/findExistBookshelf",data:{bookId:bookId}}).then(function(data,a,b){data.success?(document.querySelector("#joined").style.display="block",document.querySelector("#join").style.display="none"):(document.querySelector("#joined").style.display="none",document.querySelector("#join").style.display="block")}),$("#join").on("click",function(){core.post({url:"/book/member/addBookshelf",data:{bookId:bookId}}).then(function(data){data.success?(document.querySelector("#joined").style.display="block",document.querySelector("#join").style.display="none"):(document.querySelector("#joined").style.display="none",document.querySelector("#join").style.display="block"),alert(data.msg)})})},exports.all=function(){var typeId=$("#all_bookTypeId").val(),call=function(dataV){var booksContent_Tmpl=$("#booksContent_Tmpl").render(dataV),booksContent=$("#booksContent");booksContent.empty(),booksContent.append(booksContent_Tmpl)},styles=document.querySelectorAll("label");allList(0,typeId,1,10,call),core.list({url:"/book/findTypes"}).then(function(data,a,b){var fenleiNav_Tmpl=$("#fenleiNav_Tmpl").render(data);$(".fenleiNav").append(fenleiNav_Tmpl)}),$("#sort_type-4").on("click",function(){allList(0,typeId,1,10,call),cannelStle(styles),document.querySelector("#sort_type-4").className="now"}),$("#sort_type-7").on("click",function(){allList(1,$("#all_bookTypeId").val(),1,10,call),cannelStle(styles),document.querySelector("#sort_type-7").className="now"}),$("#book_free-1").on("click",function(){allList(2,$("#all_bookTypeId").val(),1,10,call),cannelStle(styles),document.querySelector("#book_free-1").className="now"}),$("#book_status-3").on("click",function(){allList(3,$("#all_bookTypeId").val(),1,10,call),cannelStle(styles),document.querySelector("#book_status-3").className="now"}),$("#book_fenlei").on("click",function(){var box=document.querySelector(".fenleiNav");box.clientHeight?box.style.display="none":box.style.display="block",cannelStle(styles),document.querySelector("#book_fenlei").className="now"})},exports.chapterList=function(){var num=$("#list_num0").val(),page=$("#list_nowPage").val();0<!num&&(num=1);for(var template="",select1=$("#list_select1"),select2=$("#list_select2"),i=1;i<=num;i++)template=template+'<option value="'+i+'">'+(50*(i-1)+1)+"-"+50*i+"</option>";select1.append(template),select2.append(template),selectPage(page),$(".but_prev").on("click",function(){changePage(-1)}),$(".but_next").on("click",function(){changePage(1)}),$(".list_select").change(function(e){selectPage(e.target.options[this.options.selectedIndex].value)})},exports.selectPage=selectPage,exports.bookShelf=function(){core.list({url:"/book/member/findBookshelfs",data:{page:1}}).then(function(data,a,b){if(data.success){var BookCoverList_Tmpl=$("#bookShelf_BookCoverList_Tmpl").render(data.data);$("#bookShelf_BookCoverList").append(BookCoverList_Tmpl)}})},exports.rank=function(){var styles=document.querySelectorAll("label"),dingyue=$("#part1_paihangbang_id"),newdj=$("#part2_paihangbang_id"),dj=$("#part3_paihangbang_id"),wanben=$("#part4_paihangbang_id"),templateId=$("#paihangbang_Tmpl"),callBack=function(data,navId,templateId){var dataTemplate=templateId.render(data);navId.append(dataTemplate)};dingyueF(2,1,3,callBack,dingyue,templateId),newdjF(2,1,3,callBack,newdj,templateId),djF(2,1,3,callBack,dj,templateId),wanbenF(2,1,3,callBack,wanben,templateId),$("#rank_part1").on("click",function(){dingyue.empty(),newdj.empty(),dj.empty(),wanben.empty(),dingyueF(2,1,3,callBack,dingyue,templateId),newdjF(2,1,3,callBack,newdj,templateId),djF(2,1,3,callBack,dj,templateId),wanbenF(2,1,3,callBack,wanben,templateId),cannelStle(styles),document.querySelector("#rank_part1").className="now"}),$("#rank_part2").on("click",function(){dingyue.empty(),newdj.empty(),dj.empty(),wanben.empty(),dingyueF(1,1,3,callBack,dingyue,templateId),newdjF(1,1,3,callBack,newdj,templateId),djF(1,1,3,callBack,dj,templateId),wanbenF(1,1,3,callBack,wanben,templateId),cannelStle(styles),document.querySelector("#rank_part2").className="now"}),$("#rank_part3").on("click",function(){dingyue.empty(),newdj.empty(),dj.empty(),wanben.empty(),dingyueF(0,1,3,callBack,dingyue,templateId),newdjF(0,1,3,callBack,newdj,templateId),djF(0,1,3,callBack,dj,templateId),wanbenF(0,1,3,callBack,wanben,templateId),cannelStle(styles),document.querySelector("#rank_part3").className="now"}),$("#rank_part4").on("click",function(){dingyue.empty(),newdj.empty(),dj.empty(),wanben.empty(),dingyueF(3,1,3,callBack,dingyue,templateId),newdjF(3,1,3,callBack,newdj,templateId),djF(3,1,3,callBack,dj,templateId),wanbenF(3,1,3,callBack,wanben,templateId),cannelStle(styles),document.querySelector("#rank_part4").className="now"})},exports.types=function(){var type=$("#typeAll_typeId").val(),page=$("#typeAll_page").val(),navId=$("#typeAll_paihangbang_id"),templateId=$("#typeAll_paihangbang_Tmpl"),callBack=function(data,navId,templateId){var dataTemplate=templateId.render(data);navId.append(dataTemplate)};switch(type){case"dingyue":case"hongbao":dingyueF(2,page,20,callBack,navId,templateId);break;case"xinshu":newdjF(2,page,20,callBack,navId,templateId);break;case"huiyuan":djF(2,page,20,callBack,navId,templateId);break;case"wanben":wanbenF(2,page,20,callBack,navId,templateId)}}}),define("static/t1/dist/script/module_core",["static/t1/dist/script/module_ajax","static/t1/dist/script/module_effect","static/t1/dist/script/module_utils"],function(require,exports,module){var A=require("static/t1/dist/script/module_ajax"),E=require("static/t1/dist/script/module_effect"),U=require("static/t1/dist/script/module_utils");function error(data){if(null!=data&&(data.code="401.1")){E.toastr({title:"3秒后跳转到登录页...",content:data.msg}),setTimeout(function(){window.location.href=data.data},3e3)}}exports.loadPage=function(options,fn){var op=options||{};$(op.container).html(op.loading).load(op.loadUrl,function(response,status,xhr){response.startsWith("{")&&error(JSON.parse(response)),op.callBack&&(options.data?op.callBack(options.data):op.callBack()),fn&&fn()})},exports.save=function(options){var op=options||{};return new A({url:op.url,data:op.data,type:"POST",datatype:op.datatype,processData:op.processData,contentType:op.contentType},function(data){switch(data.code){case"loading":$("#"+op.msg).html("加载中...");break;case"error":error(data.data);break;case"success":$("#"+op.msg).html("")}})},exports.remove=function(options){var op=options||{};return new A({url:op.url,data:op.data,type:op.type},function(data){switch(data.code){case"loading":$("#"+op.msg).html("删除中...");break;case"error":error(data.data);break;case"success":$("#"+op.msg).html("")}})},exports.list=function(options){var op=options||{};return new A({url:op.url,data:op.data,type:op.type},function(data){switch(data.code){case"loading":$("#"+op.msg).html("加载中...");break;case"error":error(data.data);break;case"success":$("#"+op.msg).html("")}})},exports.get=function(options){var op=options||{};return new A({url:op.url,data:op.data,type:"GET"},function(data){switch(data.code){case"loading":$("#"+op.msg).html("加载中...");break;case"error":error(data.data);break;case"success":$("#"+op.msg).html("")}})},exports.post=function(options){var op=options||{};return new A({url:op.url,data:op.data,type:"POST"},function(data){switch(data.code){case"loading":$("#"+op.msg).html("加载中...");break;case"error":error(data.data);break;case"success":$("#"+op.msg).html("")}})},exports.hasPermission=function(permission){return U.strContains(Global.perm,permission)},exports.isLogin=function(){return!$.isEmptyObject(GLOBAL.user)}}),function(){var HbAjax=function(options,callback){var _op=options||{},_url=_op.url?_op.url:"/account/ajax.do",_data=_op.data||{},_type=_op.type||"GET",_processData=!_op.processData||_op.processData,_contentType=_op.contentType?_op.contentType:"application/x-www-form-urlencoded",_datatype=_op.datatype?_op.datatype:"",_jsonp=_op.jsonp?_op.jsonp:"",_jsonpc=_op.jsonpcallback?_op.jsonpcallback:"",_location=window.location;_location.pathname,_location.search;return $.ajax({headers:{Accept:"application/json; charset=utf-8"},url:_url,type:_type,data:_data,dataType:_datatype,jsonp:_jsonp,jsonpCallback:_jsonpc,processData:_processData,contentType:_contentType,beforeSend:function(){callback&&callback({code:"loading",msg:"loading"})},success:function(data){"401.1"==data.code||"401.2"==data.code?callback&&callback({code:"error",msg:"操作异常",data:data}):callback&&callback({code:"success",msg:"success",data:data})},error:function(){callback&&callback({code:"error",msg:"网络异常"})},complete:function(xhr,ts){callback&&callback({code:"complete",xhr:xhr,ts:ts,msg:"complete"})}})};"function"==typeof define?define("static/t1/dist/script/module_ajax",[],function(){return HbAjax}):"undefined"!=typeof exports?module.exports=HbAjax:window.HbAjax=HbAjax}(),define("static/t1/dist/script/module_effect",[],function(require,exports,module){function DivSelect(id,divId,className){if(this.id=id,this.divId=divId,this.divClassName=className||"selectView",this.ele=this.$(this.id),this.ele){var that=this;for(this.status="close",this.parentObj=this.ele.parentNode;"block"!=this.readStyle(this.parentObj,"display")&&this.parentObj.parentNode;)this.parentObj=this.parentObj.parentNode;this.parentObj.style.position="relative";var temp,sp=this.absPosition(this.ele,this.parentObj);this.ele.style.visibility="hidden",this.__div=document.createElement("div"),divId&&(this.__div.id=divId),this.divClassName&&(this.__div.className=this.divClassName),this.parentObj.appendChild(this.__div),this.__div.style.width=this.ele.offsetWidth+"px",this.__div.style.position="absolute",this.__div.style.left=sp.left+"px",this.__div.style.top=sp.top+"px",this.__div.onclick=function(){that.click()},this.__div_count=document.createElement("div"),this.__div.appendChild(this.__div_count),this.__div_count.className="ds_cont",this.__div_title=document.createElement("div"),this.__div_count.appendChild(this.__div_title),this.__div_title.className="ds_title",this.__div_button=document.createElement("div"),this.__div_count.appendChild(this.__div_button),this.__div_button.className="ds_button",this.__div_list=document.createElement("div"),this.__div.appendChild(this.__div_list),this.__div_list.className="ds_list",this.__div_list.style.display="none",this.__div_listCont=document.createElement("div"),this.__div_list.appendChild(this.__div_listCont),this.__div_listCont.className="dsl_cont",this.list=[];for(var i=0;i<this.ele.options.length;i++)temp=document.createElement("p"),this.list.push(temp),this.__div_listCont.appendChild(temp),temp.innerHTML=this.ele.options[i].innerHTML,this.ele.selectedIndex==i&&(this.__div_title.innerHTML=temp.innerHTML),temp.num=i,temp.onmouseover=function(){that.showSelectIndex(this.num)},temp.onclick=function(){that.select(this.innerHTML)}}}DivSelect.prototype={showSelectIndex:function(num){void 0===num&&(num=this.ele.selectedIndex),void 0!==this.showIndex&&(this.list[this.showIndex].className=""),this.showIndex=num,this.list[this.showIndex].className="selected"},select:function(txt){for(var i=0;i<this.ele.options.length;i++)if(this.ele.options[i].innerHTML==txt){this.ele.selectedIndex=i,this.ele.onchange&&this.ele.onchange(),this.__div_title.innerHTML=txt;break}},setIndex:function(num){num<0||num>=this.list.length||(this.ele.selectedIndex=num,this.ele.onchange&&this.ele.onchange(),this.__div_title.innerHTML=this.list[num].innerHTML)},clickClose:function(e){var thisObj=e.target?e.target:event.srcElement;do{if(thisObj==this.__div)return;if("BODY"==thisObj.tagName)break;thisObj=thisObj.parentNode}while(thisObj.parentNode);this.close()},keyDown:function(e){var num=this.showIndex;38==e.keyCode&&(--num<0&&(num=this.list.length-1),this.showSelectIndex(num),this.stopDefault(e)),40==e.keyCode&&(++num>=this.list.length&&(num=0),this.showSelectIndex(num),this.stopDefault(e)),13!=e.keyCode&&9!=e.keyCode||(this.setIndex(num),this.stopDefault(e),this.close()),27==e.keyCode&&this.close()},open:function(){var that=this;this.showSelectIndex(),this.__div_list.style.display="block",this.status="open",this.__closeFn=function(e){that.clickClose(e)},this.__keyFn=function(e){that.keyDown(e)},this.addEvent(document,"click",this.__closeFn),this.addEvent(document,"keydown",this.__keyFn)},close:function(){this.__div_list.style.display="none",this.status="close",this.delEvent(document,"click",this.__closeFn),this.delEvent(document,"keydown",this.__keyFn)},click:function(){"open"==this.status?this.close():this.open()},$:function(objName){return document.getElementById?eval('document.getElementById("'+objName+'")'):eval("document.all."+objName)},addEvent:function(obj,eventType,func){obj.attachEvent?obj.attachEvent("on"+eventType,func):obj.addEventListener(eventType,func,!1)},delEvent:function(obj,eventType,func){obj.detachEvent?obj.detachEvent("on"+eventType,func):obj.removeEventListener(eventType,func,!1)},readStyle:function(i,I){return i.style[I]?i.style[I]:i.currentStyle?i.currentStyle[I]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(i,null).getPropertyValue(I):null},absPosition:function(obj,parentObj){var left=obj.offsetLeft,top=obj.offsetTop,tempObj=obj.offsetParent;try{for(;tempObj.id!=document.body&&tempObj.id!=document.documentElement&&tempObj!=parentObj&&null!=tempObj;)tempObj.tagName+" , ",left+=(tempObj=tempObj.offsetParent).offsetLeft,top+=tempObj.offsetTop}catch(e){}return{left:left,top:top}},stopDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},module.exports={divSelect:function(id,divId,className){new DivSelect(id,divId,className)},piechart:function(){0<jQuery(".piechart").length&&jQuery(".piechart").each(function(){var _t=jQuery(this),_size=_t.attr("data-size")||150,_animate=_t.attr("data-animate")||"3000";_t.easyPieChart({size:_size,animate:_animate,scaleColor:!1,trackColor:_t.attr("data-trackcolor")||"rgba(0,0,0,0.04)",lineWidth:_t.attr("data-width")||"2",lineCap:"square",barColor:_t.attr("data-color")||"#0093BF"}),jQuery("*",this).attr("style","line-height:"+_size+"px !important; height:"+_size+"px !important; width:"+_size+"px !important")})},countTo:function(){jQuery(".countTo").appear(function(){var _t=jQuery(this),_from=_t.attr("data-from")||0,_speed=_t.attr("data-speed")||1300,_refreshInterval=_t.attr("data-refreshInterval")||60;_t.countTo({from:parseInt(_from),to:_t.html(),speed:parseInt(_speed),refreshInterval:parseInt(_refreshInterval)})})},countDown:function(){var _container=jQuery(".countdown"),_container2=jQuery(".countdown-download");(0<_container.length||0<_container2.length)&&(_container.each(function(){var _t=jQuery(this),_date=_t.attr("data-from"),_labels=_t.attr("data-labels");if(_labels&&(_labels=_labels.split(",")),_date){var _d=new Date(_date);jQuery(this).countdown({until:new Date(_d),labels:_labels||["Years","Months","Weeks","Days","Hours","Minutes","Seconds"]})}}),_container2.bind("click",function(e){e.preventDefault();var _t=jQuery(this),cd_container=_t.attr("data-for"),_countdown=jQuery("#"+cd_container+" span.download-wait>.countdown"),_seconds=parseInt(_t.attr("data-seconds")),_dataURL=_t.attr("href");return _t.fadeOut(250,function(){jQuery("#"+cd_container).fadeIn(250,function(){var currentDate=new Date;currentDate.setSeconds(currentDate.getSeconds()+_seconds),_countdown.countdown({until:currentDate,format:"S",expiryUrl:_dataURL,onExpiry:function(){jQuery("#"+cd_container+" span.download-message").removeClass("hide"),jQuery("#"+cd_container+" span.download-wait").addClass("hide")}})})}),!1}))},toggle:function(){jQuery("div.toggle.active > p").addClass("preview-active"),jQuery("div.toggle.active > div.toggle-content").slideDown(400),jQuery("div.toggle > label").click(function(e){var parentSection=jQuery(this).parent(),parentWrapper=jQuery(this).parents("div.toggle"),previewPar=!1;if(parentWrapper.hasClass("toggle-accordion")&&void 0!==e.originalEvent&&parentWrapper.find("div.toggle.active > label").trigger("click"),parentSection.toggleClass("active"),parentSection.find("> p").get(0)){var previewParCurrentHeight=(previewPar=parentSection.find("> p")).css("height"),previewParAnimateHeight=previewPar.css("height");previewPar.css("height","auto"),previewPar.css("height",previewParCurrentHeight)}var toggleContent=parentSection.find("> div.toggle-content");parentSection.hasClass("active")?(jQuery(previewPar).animate({height:previewParAnimateHeight},350,function(){jQuery(this).addClass("preview-active")}),toggleContent.slideDown(350)):(jQuery(previewPar).animate({height:25},350,function(){jQuery(this).removeClass("preview-active")}),toggleContent.slideUp(350))})},pickers:function(callBack){var _container_1=jQuery(".datepicker");0<_container_1.length&&jQuery().datepicker&&_container_1.each(function(){var _t=jQuery(this),_lang=_t.attr("data-lang")||"en";jQuery(this).datepicker({format:_t.attr("data-format")||"yyyy-mm-dd",language:_lang,rtl:"true"==_t.attr("data-RTL"),changeMonth:"false"!=_t.attr("data-changeMonth"),todayBtn:"false"!=_t.attr("data-todayBtn")&&"linked",calendarWeeks:"false"!=_t.attr("data-calendarWeeks"),autoclose:"false"!=_t.attr("data-autoclose"),todayHighlight:"false"!=_t.attr("data-todayHighlight"),onRender:function(date){}}).on("changeDate",function(ev){}).data("datepicker")});var _container_2=jQuery(".rangepicker");0<_container_2.length&&jQuery().datepicker&&_container_2.each(function(){var _t=jQuery(this),_format=_t.attr("data-format").toUpperCase()||"YYYY-MM-DD";_t.daterangepicker({format:_format,startDate:_t.attr("data-from"),endDate:_t.attr("data-to"),ranges:{Today:[moment(),moment()],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()]}},function(start,end,label){callBack&&callBack(start.format("YYYY-MM-DD"),end.format("YYYY-MM-DD"))})});var _container_3=jQuery(".timepicker");0<_container_3.length&&jQuery().timepicki&&_container_3.timepicki()},select2:function(){var _container=jQuery("select.select2");0<_container.length&&_container.each(function(){var _t=jQuery(this);_t.hasClass("select2-custom")||_t.select2()})},bgimage:function(){var _t=jQuery("section[data-background], section div[data-background]");0<_t.length&&jQuery(_t).each(function(){var _this=jQuery(this),data_background=_this.attr("data-background")||"";if(""!=data_background){var data_background_delay=_this.attr("data-background-delay")||3e3,data_background_fade=_this.attr("data-background-fade")||750,_db=data_background.split(",");(_db=data_background.replace(" ","").split(","))[1]?_this.backstretch(_db,{duration:parseInt(data_background_delay),fade:parseInt(data_background_fade)}):_this.backstretch(_db),jQuery(".bs-next",_this).bind("click",function(e){e.preventDefault(),_this.data("backstretch").next()}),jQuery(".bs-prev",_this).bind("click",function(e){e.preventDefault(),_this.data("backstretch").prev()}),jQuery(window).resize(function(){window.afterResizeBkstr&&clearTimeout(window.afterResizeBkstr),window.afterResizeBkstr=setTimeout(function(){_this.data("backstretch").next()},350)})}});var data_background=jQuery("body").attr("data-background")||"";""!=data_background&&data_background&&(jQuery.backstretch(data_background),jQuery("body").addClass("transparent"))},toastr:function(options){var _option=$.extend({title:"",content:"",type:"info",closeButton:!1,progressBar:!0,showMethod:"slideDown",positionClass:"toast-top-center",timeOut:3e3},options);"success"==(toastr.options=_option).type?toastr.success(_option.title,_option.content):"warning"==_option.type?toastr.warning(_option.title,_option.content):"error"==_option.type?toastr.error(_option.title,_option.content):"info"==_option.type&&toastr.info(_option.title,_option.content)},sliderFull:function(){_headerHeight=0,jQuery("#header").hasClass("transparent")||jQuery("#header").hasClass("translucent")?_headerHeight=0:(_headerHeight=jQuery("#header").outerHeight()||0,0<jQuery("#topBar").length&&(_topBarHeight=jQuery("#topBar").outerHeight()||0,_headerHeight+=_topBarHeight)),_screenHeight=jQuery(window).height()-_headerHeight,0<jQuery(".banner-bottom-menu").length&&(_screenHeight-=jQuery(".banner-bottom-menu").height()),jQuery("#header").hasClass("static")&&(_screenHeight=jQuery(window).height()),jQuery("#slider").hasClass("halfheight")&&jQuery("#slider.halfheight").height(_screenHeight/2),jQuery("#slider").hasClass("thirdheight")&&jQuery("#slider.thirdheight").height(_screenHeight/1.5),jQuery("#slider").hasClass("fullheight")&&(jQuery("#slider.fullheight").height(_screenHeight),jQuery("#slider.fullheight-min").css({"min-height":_screenHeight+"px"})),window.width<960&&jQuery("#slider.mobile-fullheight").height(_screenHeight)},afterResize:function(){jQuery(window).resize(function(){window.afterResizeApp&&clearTimeout(window.afterResizeApp),window.afterResizeApp=setTimeout(function(){window.width=jQuery(window).width(),window.height=jQuery(window).height(),0<jQuery(".flexslider").length&&jQuery(".flexslider").resize()},300)})}}}),define("static/t1/dist/script/module_utils",[],function(require,exports,module){module.exports={setLang:function(lang){setCookie("lang",lang),location.reload()},setCookie:function(name,value){var exp=new Date;exp.setTime(exp.getTime()+2592e6),document.cookie=name+"="+escape(value)+";path=/;expires="+exp.toGMTString()},getCookie:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?unescape(arr[2]):null},delCookie:function(name){var exp=new Date;exp.setTime(exp.getTime()-1);var cval=getCookie(name);null!=cval&&(document.cookie=name+"="+cval+";expires="+exp.toGMTString())},isEmail:function(str){return/\w[-\w.+]*[A-Za-z0-9]@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/.test(str)},isPass:function(str){return/(?=.*[a-z])(?=.*[0-9])[A-Za-z0-9]{6,20}/.test(str)},isEmpty:function(id){return 0==$(id).val().length?($("#error").show(),$("#error_show").html(Lang.input_cant_empty),$(id).addClass("error"),!0):($("#error").hide(),$(id).removeClass("error"),!1)},response:function(data){if(null!=data.msg&&0<data.msg.length){null==data.code&&(data.code=0);var icon=1==data.success?6:2,time=data.msg.length<6?2e3:4e3;layer.msg(data.msg,{time:time,icon:icon},function(){"401.1"==data.code&&(window.location.href=data.data),null!=data.url&&0<data.url.length&&(window.location.href=data.url)})}else null!=data.url&&0<data.url.length&&(window.location.href=data.url)},isJson:function(str){try{$.parseJSON(str)}catch(e){return!1}return!0},stopDefault:function(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1},compare_date:function(min_time,max_time){var min_date=new Date(min_time.replace(/-/g,"/")),max_date=new Date(max_time.replace(/-/g,"/"));return max_date<min_date?-1:min_date==max_date?0:min_date<max_date?1:void 0},toUtf8:function(str){var out,i,len,c;for(out="",len=str.length,i=0;i<len;i++)1<=(c=str.charCodeAt(i))&&c<=127?out+=str.charAt(i):(2047<c?(out+=String.fromCharCode(224|c>>12&15),out+=String.fromCharCode(128|c>>6&63)):out+=String.fromCharCode(192|c>>6&31),out+=String.fromCharCode(128|c>>0&63));return out},rtrim_zero:function(number){return Number(number).toString()},formatcoin:function(number,len){return number=number.toString(),null!=len&&null!==len||(len=-1==number.indexOf(".")?0:number.slice(number.indexOf(".")+1).length),this.number_format(number,len,",",3)},number_format:function(number,bit,sign,gapnum){number=number||0,bit=isNaN(bit=Math.abs(bit))?2:bit,sign=sign||",",gapnum=gapnum||3;var decimal=".",negative=number<0?"-":"",i=parseInt(number=Math.abs(+number||0).toFixed(bit),10)+"",j=(j=i.length)>gapnum?j%gapnum:0,rule=eval("/(\\d{"+gapnum+"})(?=\\d)/g");return negative+(j?i.substr(0,j)+sign:"")+i.substr(j).replace(rule,"$1"+sign)+(bit?decimal+Math.abs(number-i).toFixed(bit).slice(2):"")},bcadd:function(a,b){return null!=a&&null!=a||(a=0),null!=b&&null!=b||(b=0),numeral(a).add(b).value()},bcsub:function(a,b){return null!=a&&null!=a||(a=0),null!=b&&null!=b||(b=0),numeral(a).subtract(b).value()},bcmul:function(a,b){return null!=a&&null!=a||(a=0),null!=b&&null!=b||(b=0),numeral(a).multiply(b).value()},bcdiv:function(a,b){return null!=a&&null!=a||(a=0),null==b||null==b?0:numeral(a).divide(b).value()},bccomp:function(a,b){return a=Number(a),(b=Number(b))<a?1:a<b?-1:0},showGoogleBlinding:function(){var index=layer.open({type:1,title:!1,shadeClose:!0,closeBtn:0,scrollbar:!1,shade:.8,area:"590px",shadeClose:!1,content:$("#google_blind_pop")});$("#google_blind_pop .closePopBt,.skipBt").on("click",function(){layer.close(index)})},input_number_decimal:function(obj,decimal){var position=$(obj).getCurPos(),number_rule=0==decimal?/[^0-9]/g:/[^0-9.]/g,amt=$.trim($(obj).val().replace(number_rule,""));if(0<=amt.indexOf(".")){var amt_decimal=amt.slice(amt.indexOf(".")+1).length;decimal<amt_decimal&&(amt=amt.substr(0,amt.length-(amt_decimal-decimal)))}$(obj).val(amt).setCurPos(position,position)},getPercent:function(a){return this.bcmul(a,100).toFixed(2)+"%"},getCeil:function(number,double){return parseInt(number*Math.pow(10,double))/Math.pow(10,double)},unFormatcoin:function(str){return str.replace(/,/g,"")},is_null:function(a){return null==a||null==a||""==a},strContains:function(str,substr){return new RegExp(substr).test(str)},replaceAll:function(str,chr,newChar){return str.replace(new RegExp(chr,"gm"),newChar)},strSubstring:function(s,l,r){var replace="",len=l||30,value=s||"",length=value.length;return length&&len<length&&(length=len,replace=r||"..."),"<span title ='"+s+"'>"+value.substring(0,length)+replace+"</span>"},timer:function(countdown,btn){var _this=btn;_this.attr("disabled","true"),_this.html(countdown+"秒后重新获取");var timer=setInterval(function(){0==countdown?(clearInterval(timer),_this.removeAttr("disabled"),_this.html("重新发送验证码")):(countdown--,_this.html(countdown+"秒后重新获取"))},1e3)},dateFormat:function(date,format){var d=new Date(date),zeroize=function(value,length){length||(length=2),value=String(value);for(var i=0,zeros="";i<length-value.length;i++)zeros+="0";return zeros+value};return format.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|m{1,4}|yy(?:yy)?|([hHMstT])\1?|[lLZ])\b/g,function($0){switch($0){case"d":return d.getDate();case"dd":return zeroize(d.getDate());case"ddd":return["Sun","Mon","Tue","Wed","Thr","Fri","Sat"][d.getDay()];case"dddd":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()];case"M":return d.getMonth()+1;case"MM":return zeroize(d.getMonth()+1);case"MMM":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()];case"MMMM":return["January","February","March","April","May","June","July","August","September","October","November","December"][d.getMonth()];case"yy":return String(d.getFullYear()).substr(2);case"yyyy":return d.getFullYear();case"h":return d.getHours()%12||12;case"hh":return zeroize(d.getHours()%12||12);case"H":return d.getHours();case"HH":return zeroize(d.getHours());case"m":return d.getMinutes();case"mm":return zeroize(d.getMinutes());case"s":return d.getSeconds();case"ss":return zeroize(d.getSeconds());case"l":return zeroize(d.getMilliseconds(),3);case"L":var m=d.getMilliseconds();return 99<m&&(m=Math.round(m/10)),zeroize(m);case"tt":return d.getHours()<12?"am":"pm";case"TT":return d.getHours()<12?"AM":"PM";case"Z":return d.toUTCString().match(/[A-Z]+$/);default:return $0.substr(1,$0.length-2)}})},getUrlParameter:function(name,parent){void 0===parent&&(parent=!1);var r,reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");return null!=(r=parent?window.parent.location.search.substr(1).match(reg):window.location.search.substr(1).match(reg))?unescape(r[2]):null},isNotEmpty:function(str){return!!str&&(0!=str.replace(/(^s*)|(s*$)/g,"").length&&null!=str)},windowsUrlInfo:function(){return{hash:window.location.hash,host:window.location.host,hostname:window.location.hostname,href:window.location.href,pathname:window.location.pathname,port:window.location.port,protocol:window.location.protocol,search:window.location.search}},sleep:function(numberMillis){for(var now=new Date,exitTime=now.getTime()+numberMillis;;)if((now=new Date).getTime()>exitTime)return}}}),function($){"use strict";function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function md5_cmn(q,a,b,x,s,t){return safe_add((num=safe_add(safe_add(a,q),safe_add(x,t)))<<(cnt=s)|num>>>32-cnt,b);var num,cnt}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function binl_md5(x,len){x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16)b=md5_ii(b=md5_ii(b=md5_ii(b=md5_ii(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_ff(b=md5_ff(b=md5_ff(b=md5_ff(oldb=b,c=md5_ff(oldc=c,d=md5_ff(oldd=d,a=md5_ff(olda=a,b,c,d,x[i],7,-680876936),b,c,x[i+1],12,-389564586),a,b,x[i+2],17,606105819),d,a,x[i+3],22,-1044525330),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+4],7,-176418897),b,c,x[i+5],12,1200080426),a,b,x[i+6],17,-1473231341),d,a,x[i+7],22,-45705983),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+8],7,1770035416),b,c,x[i+9],12,-1958414417),a,b,x[i+10],17,-42063),d,a,x[i+11],22,-1990404162),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+12],7,1804603682),b,c,x[i+13],12,-40341101),a,b,x[i+14],17,-1502002290),d,a,x[i+15],22,1236535329),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+1],5,-165796510),b,c,x[i+6],9,-1069501632),a,b,x[i+11],14,643717713),d,a,x[i],20,-373897302),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+5],5,-701558691),b,c,x[i+10],9,38016083),a,b,x[i+15],14,-660478335),d,a,x[i+4],20,-405537848),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+9],5,568446438),b,c,x[i+14],9,-1019803690),a,b,x[i+3],14,-187363961),d,a,x[i+8],20,1163531501),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),b,c,x[i+2],9,-51403784),a,b,x[i+7],14,1735328473),d,a,x[i+12],20,-1926607734),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+5],4,-378558),b,c,x[i+8],11,-2022574463),a,b,x[i+11],16,1839030562),d,a,x[i+14],23,-35309556),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),b,c,x[i+4],11,1272893353),a,b,x[i+7],16,-155497632),d,a,x[i+10],23,-1094730640),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+13],4,681279174),b,c,x[i],11,-358537222),a,b,x[i+3],16,-722521979),d,a,x[i+6],23,76029189),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+9],4,-640364487),b,c,x[i+12],11,-421815835),a,b,x[i+15],16,530742520),d,a,x[i+2],23,-995338651),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i],6,-198630844),b,c,x[i+7],10,1126891415),a,b,x[i+14],15,-1416354905),d,a,x[i+5],21,-57434055),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+12],6,1700485571),b,c,x[i+3],10,-1894986606),a,b,x[i+10],15,-1051523),d,a,x[i+1],21,-2054922799),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+8],6,1873313359),b,c,x[i+15],10,-30611744),a,b,x[i+6],15,-1560198380),d,a,x[i+13],21,1309151649),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+4],6,-145523070),b,c,x[i+11],10,-1120210379),a,b,x[i+2],15,718787259),d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd);return[a,b,c,d]}function binl2rstr(input){var i,output="";for(i=0;i<32*input.length;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function rstr2binl(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;for(i=0;i<8*input.length;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function rstr2hex(input){var x,i,output="";for(i=0;i<input.length;i+=1)x=input.charCodeAt(i),output+="0123456789abcdef".charAt(x>>>4&15)+"0123456789abcdef".charAt(15&x);return output}function str2rstr_utf8(input){return unescape(encodeURIComponent(input))}function raw_md5(s){return function(s){return binl2rstr(binl_md5(rstr2binl(s),8*s.length))}(str2rstr_utf8(s))}function raw_hmac_md5(k,d){return function(key,data){var i,hash,bkey=rstr2binl(key),ipad=[],opad=[];for(ipad[15]=opad[15]=void 0,16<bkey.length&&(bkey=binl_md5(bkey,8*key.length)),i=0;i<16;i+=1)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];return hash=binl_md5(ipad.concat(rstr2binl(data)),512+8*data.length),binl2rstr(binl_md5(opad.concat(hash),640))}(str2rstr_utf8(k),str2rstr_utf8(d))}function md5(string,key,raw){return key?raw?raw_hmac_md5(key,string):rstr2hex(raw_hmac_md5(key,string)):raw?raw_md5(string):rstr2hex(raw_md5(string))}function hbmd5(string,key,raw){return md5(string+"hello, moto",key,raw)}"function"==typeof define?define("static/t1/dist/script/module_md5",[],function(){return{md5:md5,hbmd5:hbmd5}}):($.md5=md5,$.hbmd5=hbmd5)}(this),function(window){var BitValidator=function(options){var load_btn=null,_default={forms:null,beforeSend:function(_form){},process:null,rules:{},beforeValidation:function(){},beforeSubmit:function(_form){var _btn=_form.find(":submit");(load_btn=Ladda.create(_btn[0])).start(),_btn.prop("disabled",!0)},formSubmit:null,callback:function(_data,_form){var _btn=_form.find(":submit");load_btn.stop(),_btn.prop("disabled",!1)},single:null,changes:null,ignoreHidden:!0,ajaxPost:!0,ajaxError:null,ajaxData:null,instant:!1,postData:null,tip:"",is_focus:!0,dataType:{}},_option=$.extend(_default,options),_form=$(options.forms),_init={fn_init:function(obj){var _submit=obj.find(":submit");_submit.prop("disabled")&&!_submit.data("disabled")&&_submit.prop("disabled",!1),_option.beforeSend&&_option.beforeSend(obj),_option.rules.errorPlacement=function(error,element){0<element.next().length?error.insertAfter(element.parent("div")):error.insertAfter(element)},obj.validate(_option.rules),obj.find(":reset").click(function(){obj.validate().resetForm()}),obj.submit(function(e){return e.preventDefault(),_option.beforeValidation&&_option.beforeValidation($(this)),!!obj.validate(_option.rules).form()&&(!1!==(_option.beforeSubmit&&_option.beforeSubmit($(this)))&&(_option.ajaxPost?(_init.fn_ajax($(this)),!1):void 0))})},fn_ajax:function(obj){var _url,_data,_method;_url=obj.attr("action"),_method=obj.attr("method")||"post",_data=_option.postData?_option.postData(obj.serializeArray()):obj.serializeArray();var _async=!0;1==obj.attr("data-async")&&(_async=!1),_option.ajaxData={data:_data,url:_url,type:_method,async:_async},_option.formSubmit(_option,obj)}};_form&&0<_form.length&&_form.each(function(){var _this=$(this);_init.fn_init(_this)})};"function"==typeof define?define("static/t1/dist/script/module_validator",[],function(){return BitValidator}):"undefined"!=typeof exports?module.exports=BitValidator:window.BitValidator=BitValidator}(window),define("static/t1/dist/script/module_tpl",["static/t1/dist/script/module_utils"],function(require,exports,module){var U=require("static/t1/dist/script/module_utils");exports.render=function(options){var op=options||{};$.templates(op.tplId).link(op.renderId,op.data),$.views.helpers({formatterIcon:function(icon){if(icon.match(/^fa /))return icon.replace("fa ","")},strNewLine:function(str,chr){return null!=str?U.replaceAll(str,chr,"<br>"):""},formatDate:function(date,format){return U.dateFormat(date,format)}})}}),define("static/t1/dist/script/module_swal",[],function(require,exports,module){exports.swalBase=function(title,text,state){swal({title:title,text:text,type:void 0===state?"":state})},exports.swalSuccess=function(title,text,callback){swal({title:title,text:text,type:"success"},callback)},exports.swalError=function(title,text){swal({title:title,text:text,type:"error"})},exports.swalWarning=function(title,text){swal({title:title,text:text,type:"warning"})},exports.swalConfirm=function(title,text,confirmButtonText,callback){swal({title:void 0===title?"确认该操作吗?":title,text:void 0===text?"":text,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:void 0===confirmButtonText?"确认":confirmButtonText,closeOnConfirm:!1},callback)}}),define("static/t1/dist/script/module_validate",[],function(require){jQuery.validator.addMethod("mobile",function(value,element){var length=value.length;return this.optional(element)||11==length&&/^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/.test(value)}),jQuery.validator.addMethod("password",function(value,element){return this.optional(element)||/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&*]+$)[a-zA-Z\d!@#$%^&*]{6,20}$/.test(value)})});